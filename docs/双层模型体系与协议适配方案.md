# åŒå±‚æ¨¡å‹ä½“ç³»ä¸ Anthropic åè®®é€‚é…æ–¹æ¡ˆ

## ä¸€ã€èƒŒæ™¯ä¸éœ€æ±‚

### 1.1 å½“å‰æ¶æ„ç°çŠ¶

ClawBot Manager å½“å‰é‡‡ç”¨**ç»Ÿä¸€ OpenAI-compatible åè®®**çš„ä»£ç†æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OpenClaw Bot Container                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä½¿ç”¨ OpenAI-compatible SDK å‘é€è¯·æ±‚                          â”‚   â”‚
â”‚  â”‚  model: "gpt-4o" / "claude-sonnet-4-20250514" / ...         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Proxy Gateway (Zero-Trust)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. Bot Token éªŒè¯ï¼ˆZero-Trust Modeï¼‰                         â”‚   â”‚
â”‚  â”‚  2. æ¨¡å‹åç§°è§„èŒƒåŒ–                                            â”‚   â”‚
â”‚  â”‚  3. API Key åŠ¨æ€è·¯ç”±ï¼ˆåŸºäº tagsï¼‰                             â”‚   â”‚
â”‚  â”‚  4. åè®®è½¬æ¢ï¼ˆå¦‚éœ€è¦ï¼‰                                        â”‚   â”‚
â”‚  â”‚  5. Token ä½¿ç”¨é‡è¿½è¸ª                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Upstream AI Provider                            â”‚
â”‚  OpenAI / Anthropic / Gemini / DeepSeek / Zhipu / Moonshot / ...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒé—®é¢˜

1. **åè®®é€‚é…éœ€æ±‚**ï¼šéƒ¨åˆ†å›½å†… Providerï¼ˆå¦‚ Zhipuã€Moonshotï¼‰çš„æ¨¡å‹**åŒæ—¶æ”¯æŒ OpenAI å’Œ Anthropic åè®®**ï¼Œä½†å½“å‰ä»…ä½¿ç”¨ OpenAI åè®®
2. **åœºæ™¯å·®å¼‚åŒ–éœ€æ±‚**ï¼šæ™®é€šç”Ÿäº§ä»»åŠ¡ï¼ˆå¯¹è¯ã€ç¿»è¯‘ï¼‰ä¸ç ”ç©¶ä»»åŠ¡ï¼ˆæ·±åº¦è§„åˆ’ï¼‰å¯¹æ¨¡å‹èƒ½åŠ›è¦æ±‚ä¸åŒ
3. **åŠŸèƒ½ç¼ºå¤±**ï¼šAnthropic åŸç”ŸåŠŸèƒ½ï¼ˆExtended Thinkingã€Cache Controlï¼‰åœ¨ OpenAI åè®®ä¸‹æ— æ³•ä½¿ç”¨

### 1.3 ç›®æ ‡æ–¹æ¡ˆ

å»ºç«‹**åŒå±‚æ¨¡å‹ä½“ç³»**ï¼Œé’ˆå¯¹ä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒçš„åè®®å’Œæ¨¡å‹ï¼š

| å±‚çº§                          | åè®®                 | ç”¨é€”                                         | æ¨¡å‹æ•°é‡     |
| ----------------------------- | -------------------- | -------------------------------------------- | ------------ |
| **ç¬¬ä¸€å±‚ï¼ˆç”Ÿäº§ + è·¯ç”±å±‚ï¼‰**   | OpenAI-compatible    | æ™®é€šå¯¹è¯ã€ç¿»è¯‘ã€æ€»ç»“ã€æ•°æ®åˆ†æã€æ™®é€šå·¥å…·è°ƒç”¨ | å…¨éƒ¨æ¨¡å‹     |
| **ç¬¬äºŒå±‚ï¼ˆç ”ç©¶ Agent ä¸“ç”¨ï¼‰** | Anthropic / åŸç”Ÿåè®® | æ·±åº¦è§„åˆ’ã€å¤æ‚æ¨ç†ã€Extended Thinking        | å°‘æ•°ç²¾é€‰æ¨¡å‹ |

---

## äºŒã€åŒå±‚æ¨¡å‹ä½“ç³»è®¾è®¡

### 2.1 æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              OpenClaw Bot Container                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Agent Request Router                                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ æ£€æµ‹ä»»åŠ¡ç±»å‹ï¼ˆproduction / researchï¼‰                             â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ é€‰æ‹©æ¨¡å‹å±‚çº§                                                      â”‚ â”‚
â”‚  â”‚  â””â”€â”€ è®¾ç½®åè®®åå¥½                                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                     â”‚
                    â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¬¬ä¸€å±‚ï¼šç”Ÿäº§ + è·¯ç”±å±‚             â”‚   â”‚   ç¬¬äºŒå±‚ï¼šç ”ç©¶ Agent ä¸“ç”¨          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  åè®®: OpenAI-compatible    â”‚ â”‚   â”‚   â”‚  åè®®: Anthropic / åŸç”Ÿ     â”‚ â”‚
â”‚   â”‚  ç«¯ç‚¹: /v1/openai-compatibleâ”‚ â”‚   â”‚   â”‚  ç«¯ç‚¹: /v1/anthropic        â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚   â”‚                                   â”‚
â”‚   é€‚ç”¨åœºæ™¯:                        â”‚   â”‚   é€‚ç”¨åœºæ™¯:                        â”‚
â”‚   â€¢ æ™®é€šå¯¹è¯                      â”‚   â”‚   â€¢ æ·±åº¦è§„åˆ’                      â”‚
â”‚   â€¢ ç¿»è¯‘                          â”‚   â”‚   â€¢ å¤æ‚æ¨ç†                      â”‚
â”‚   â€¢ æ€»ç»“                          â”‚   â”‚   â€¢ Extended Thinking            â”‚
â”‚   â€¢ æ•°æ®åˆ†æ                      â”‚   â”‚   â€¢ Cache Control               â”‚
â”‚   â€¢ æ™®é€šå·¥å…·è°ƒç”¨                  â”‚   â”‚   â€¢ å¤šæ­¥ä»»åŠ¡æ‰§è¡Œ                  â”‚
â”‚                                   â”‚   â”‚                                   â”‚
â”‚   æ”¯æŒæ¨¡å‹: å…¨éƒ¨ 64+ Provider     â”‚   â”‚   æ”¯æŒæ¨¡å‹: ç²¾é€‰ 5-10 ä¸ªæ¨¡å‹      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Proxy Gateway (Zero-Trust)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. Token éªŒè¯ & æƒé™æ£€æŸ¥                                              â”‚ â”‚
â”‚  â”‚  2. åè®®è·¯ç”±ï¼ˆopenai-compatible / anthropic / gemini-nativeï¼‰          â”‚ â”‚
â”‚  â”‚  3. API Key é€‰æ‹© & è´Ÿè½½å‡è¡¡                                            â”‚ â”‚
â”‚  â”‚  4. è¯·æ±‚è½¬æ¢ & å“åº”å¤„ç†                                                â”‚ â”‚
â”‚  â”‚  5. Token ä½¿ç”¨é‡ & æˆæœ¬è¿½è¸ª                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç¬¬ä¸€å±‚ï¼šç”Ÿäº§ + è·¯ç”±å±‚

#### 2.2.1 è®¾è®¡åŸåˆ™

1. **åè®®ç»Ÿä¸€**ï¼šæ‰€æœ‰æ¨¡å‹ä½¿ç”¨ OpenAI-compatible åè®®
2. **æœ€å¤§å…¼å®¹**ï¼šæ”¯æŒå…¨éƒ¨ 64+ Provider
3. **é«˜æ€§èƒ½**ï¼šä¼˜å…ˆé€‰æ‹©å“åº”é€Ÿåº¦å¿«çš„æ¨¡å‹
4. **æˆæœ¬ä¼˜åŒ–**ï¼šæ ¹æ®é¢„ç®—è‡ªåŠ¨é€‰æ‹©æ€§ä»·æ¯”æœ€é«˜çš„æ¨¡å‹

#### 2.2.2 é€‚ç”¨åœºæ™¯

| åœºæ™¯         | æè¿°             | æ¨èæ¨¡å‹                                     |
| ------------ | ---------------- | -------------------------------------------- |
| æ™®é€šå¯¹è¯     | æ—¥å¸¸é—®ç­”ã€é—²èŠ   | gpt-4o-mini, deepseek-chat, gemini-2.0-flash |
| ç¿»è¯‘         | å¤šè¯­è¨€ç¿»è¯‘       | claude-3-5-haiku-20241022, gpt-4o-mini       |
| æ€»ç»“         | æ–‡æœ¬æ‘˜è¦         | deepseek-chat, claude-3-5-haiku-20241022     |
| æ•°æ®åˆ†æ     | ç»“æ„åŒ–æ•°æ®åˆ†æ   | gpt-4o, claude-sonnet-4-20250514             |
| æ™®é€šå·¥å…·è°ƒç”¨ | Function Calling | gpt-4o, claude-sonnet-4-20250514             |

#### 2.2.3 Proxy ç«¯ç‚¹

```
POST /v1/openai-compatible/chat/completions
```

#### 2.2.4 è¯·æ±‚æ ¼å¼

```json
{
  "model": "gpt-4o",
  "messages": [...],
  "stream": true,
  "tools": [...]
}
```

### 2.3 ç¬¬äºŒå±‚ï¼šç ”ç©¶ Agent ä¸“ç”¨

#### 2.3.1 è®¾è®¡åŸåˆ™

1. **åè®®ä¼˜é€‰**ï¼šä¼˜å…ˆä½¿ç”¨ Anthropic åè®®ï¼Œå……åˆ†åˆ©ç”¨ Extended Thinking
2. **ç²¾é€‰æ¨¡å‹**ï¼šä»…é€‰æ‹© 5-10 ä¸ªå…·å¤‡æ·±åº¦æ¨ç†èƒ½åŠ›çš„æ¨¡å‹
3. **åŠŸèƒ½å®Œæ•´**ï¼šæ”¯æŒ Extended Thinkingã€Cache Control ç­‰åŸç”ŸåŠŸèƒ½
4. **è´¨é‡ä¼˜å…ˆ**ï¼šä¸è®¡æˆæœ¬è¿½æ±‚æœ€ä½³æ¨ç†æ•ˆæœ

#### 2.3.2 é€‚ç”¨åœºæ™¯

| åœºæ™¯              | æè¿°             | æ¨èæ¨¡å‹                                         | åè®®               |
| ----------------- | ---------------- | ------------------------------------------------ | ------------------ |
| æ·±åº¦è§„åˆ’          | å¤šæ­¥éª¤ä»»åŠ¡è§„åˆ’   | claude-opus-4-20250514, claude-sonnet-4-20250514 | Anthropic          |
| å¤æ‚æ¨ç†          | æ•°å­¦ã€é€»è¾‘æ¨ç†   | claude-opus-4-20250514, deepseek-reasoner        | Anthropic / OpenAI |
| Extended Thinking | éœ€è¦å±•ç¤ºæ€è€ƒè¿‡ç¨‹ | claude-opus-4-20250514, claude-sonnet-4-20250514 | Anthropic          |
| å¤§è§„æ¨¡ç¼“å­˜        | Prompt Caching   | claude-sonnet-4-20250514                         | Anthropic          |
| åŸç”Ÿå¤šæ¨¡æ€        | è§†è§‰ç†è§£         | gemini-2.0-flash-thinking                        | Gemini Native      |

#### 2.3.3 Proxy ç«¯ç‚¹

```
POST /v1/anthropic/messages      # Anthropic åè®®
POST /v1/gemini/models/:model    # Gemini åŸç”Ÿåè®®ï¼ˆå¯é€‰ï¼‰
```

#### 2.3.4 è¯·æ±‚æ ¼å¼ï¼ˆAnthropicï¼‰

```json
{
  "model": "claude-sonnet-4-20250514",
  "max_tokens": 8192,
  "thinking": {
    "type": "enabled",
    "budget_tokens": 20000
  },
  "messages": [
    {
      "role": "user",
      "content": "è¯·åˆ†æè¿™ä¸ªå¤æ‚é—®é¢˜..."
    }
  ],
  "system": [
    {
      "type": "text",
      "text": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åˆ†æåŠ©æ‰‹...",
      "cache_control": { "type": "ephemeral" }
    }
  ]
}
```

### 2.4 ç¬¬äºŒå±‚æ”¯æŒæ¨¡å‹æ¸…å•

ä»¥ä¸‹æ¨¡å‹æ”¯æŒ Anthropic åè®®æˆ–åŸç”Ÿåè®®ï¼Œå¯ç”¨äºç ”ç©¶ Agentï¼š

#### 2.4.1 Anthropic Claude ç³»åˆ—ï¼ˆåŸç”Ÿ Anthropic åè®®ï¼‰

| æ¨¡å‹                      | åè®®      | Extended Thinking | Cache Control | å®šä»· (Input/Output $/M) |
| ------------------------- | --------- | ----------------- | ------------- | ----------------------- |
| claude-opus-4-20250514    | anthropic | âœ…                | âœ…            | $15 / $75               |
| claude-sonnet-4-20250514  | anthropic | âœ…                | âœ…            | $3 / $15                |
| claude-3-5-haiku-20241022 | anthropic | âŒ                | âœ…            | $0.8 / $4               |

#### 2.4.2 æ™ºè°± AI GLM ç³»åˆ—ï¼ˆæ”¯æŒ Anthropic åè®®ï¼‰

| æ¨¡å‹        | åè®®               | ç‰¹ç‚¹                                            | å®šä»· (Input/Output Â¥/M) |
| ----------- | ------------------ | ----------------------------------------------- | ----------------------- |
| glm-5       | anthropic / openai | æ¨è Anthropicï¼ˆæ›´å¥½çš„ Extended Thinking æ”¯æŒï¼‰ | Â¥10 / Â¥10               |
| glm-5-flash | anthropic / openai | æ¨è Anthropic                                  | Â¥0.1 / Â¥0.1             |
| glm-4-plus  | anthropic / openai | é€šç”¨                                            | Â¥50 / Â¥50               |
| glm-4-air   | anthropic / openai | é€šç”¨                                            | Â¥1 / Â¥1                 |
| glm-4-flash | anthropic / openai | å¿«é€Ÿå“åº”                                        | Â¥0.1 / Â¥0.1             |

> å‚è€ƒï¼šhttps://open.bigmodel.cn/dev/api#anthropic

#### 2.4.3 æœˆä¹‹æš—é¢ Kimi ç³»åˆ—ï¼ˆæ”¯æŒ Anthropic åè®®ï¼‰

| æ¨¡å‹             | åè®®               | ç‰¹ç‚¹                             | å®šä»· (Input/Output Â¥/M) |
| ---------------- | ------------------ | -------------------------------- | ----------------------- |
| kimi-latest      | anthropic / openai | æ¨è Anthropicï¼ˆæ›´å¥½çš„å·¥å…·è°ƒç”¨ï¼‰ | Â¥10 / Â¥10               |
| moonshot-v1-8k   | anthropic / openai | é€šç”¨                             | Â¥12 / Â¥12               |
| moonshot-v1-32k  | anthropic / openai | é•¿ä¸Šä¸‹æ–‡                         | Â¥12 / Â¥12               |
| moonshot-v1-128k | anthropic / openai | è¶…é•¿ä¸Šä¸‹æ–‡                       | Â¥14 / Â¥14               |

> å‚è€ƒï¼šhttps://platform.moonshot.cn/docs/api/anthropic

#### 2.4.4 DeepSeek ç³»åˆ—ï¼ˆOpenAI åè®®ï¼Œæ¨èç”¨äºæ¨ç†ï¼‰

| æ¨¡å‹              | åè®®   | ç‰¹ç‚¹           | å®šä»· (Input/Output $/M) |
| ----------------- | ------ | -------------- | ----------------------- |
| deepseek-reasoner | openai | æ·±åº¦æ¨ç†ï¼ˆR1ï¼‰ | $0.55 / $2.19           |

#### 2.4.5 Google Gemini ç³»åˆ—ï¼ˆGemini åŸç”Ÿåè®®ï¼Œå¯é€‰ï¼‰

| æ¨¡å‹                      | åè®®   | ç‰¹ç‚¹          | å®šä»· (Input/Output $/M) |
| ------------------------- | ------ | ------------- | ----------------------- |
| gemini-2.0-flash-thinking | gemini | Thinking Mode | $0.1 / $0.4             |

---

## ä¸‰ã€Anthropic åè®®é€‚é…æ–¹æ¡ˆ

### 3.1 æ•°æ®æ¨¡å‹æ‰©å±•

#### 3.1.1 ModelAvailability è¡¨æ‰©å±•

```prisma
model ModelAvailability {
  // ... ç°æœ‰å­—æ®µ ...

  // ============ æ–°å¢ï¼šåè®®é€‚é…é…ç½® ============
  /// æ¨¡å‹æ”¯æŒçš„åè®®ç±»å‹åˆ—è¡¨
  supportedApiTypes  String[] @default(["openai"]) @map("supported_api_types")
  /// ç”¨æˆ·ä¼˜å…ˆé€‰æ‹©çš„åè®®ç±»å‹ï¼ˆå¯é€‰ï¼‰
  preferredApiType   String?  @map("preferred_api_type") @db.VarChar(50)

  // ... å…¶ä»–å­—æ®µ ...
}
```

#### 3.1.2 ModelCatalog è¡¨æ‰©å±•

```prisma
model ModelCatalog {
  // ... ç°æœ‰å­—æ®µ ...

  /// è¯¥æ¨¡å‹æ”¯æŒçš„ API åè®®
  supportedApiTypes  String[] @default(["openai"]) @map("supported_api_types")
  /// Anthropic åè®®æ¨¡å‹æ ‡è¯†ç¬¦ï¼ˆå¦‚æœä¸ openai ä¸åŒï¼‰
  anthropicModelId   String?  @map("anthropic_model_id") @db.VarChar(100)
  /// æ˜¯å¦æ¨èä½¿ç”¨ Anthropic åè®®
  recommendAnthropic Boolean  @default(false) @map("recommend_anthropic")
  /// æ¨èåŸå› 
  recommendReason    String?  @map("recommend_reason") @db.VarChar(500)

  // ... å…¶ä»–å­—æ®µ ...
}
```

### 3.2 Provider æ¨¡å‹åè®®æ”¯æŒé…ç½®

#### 3.2.1 é…ç½®æ–‡ä»¶

**æ–‡ä»¶è·¯å¾„**: `packages/contracts/src/schemas/model-api-type-support.schema.ts`

```typescript
import { z } from 'zod';

/**
 * æ¨¡å‹ API åè®®æ”¯æŒé…ç½®
 * å®šä¹‰å“ªäº› Provider çš„å“ªäº›æ¨¡å‹æ”¯æŒå¤šç§åè®®
 */

export const ModelApiTypeSchema = z.enum([
  'openai', // OpenAI å…¼å®¹åè®®
  'anthropic', // Anthropic åè®®
  'gemini', // Google Gemini åè®®
]);

export type ModelApiType = z.infer<typeof ModelApiTypeSchema>;

export interface ModelApiTypeSupportConfig {
  providerId: string;
  models: Array<{
    modelId: string;
    displayName: string;
    supportedApiTypes: ModelApiType[];
    anthropicModelId?: string;
    recommendAnthropic: boolean;
    recommendReason?: string;
    layer: 'production' | 'research' | 'both';
  }>;
}

/**
 * æ”¯æŒå¤šåè®®çš„ Provider å’Œæ¨¡å‹é…ç½®
 */
export const MODEL_API_TYPE_SUPPORT: ModelApiTypeSupportConfig[] = [
  // ============ æ™ºè°± AI (Zhipu) ============
  {
    providerId: 'zhipu',
    models: [
      {
        modelId: 'glm-5',
        displayName: 'GLM-5',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'glm-5',
        recommendAnthropic: true,
        recommendReason: 'æ›´å¥½çš„ Extended Thinking å’Œæµå¼è¾“å‡ºæ”¯æŒ',
        layer: 'research',
      },
      {
        modelId: 'glm-5-flash',
        displayName: 'GLM-5-Flash',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'glm-5-flash',
        recommendAnthropic: true,
        recommendReason: 'æ›´å¥½çš„ Extended Thinking å’Œæµå¼è¾“å‡ºæ”¯æŒ',
        layer: 'research',
      },
      {
        modelId: 'glm-4-plus',
        displayName: 'GLM-4-Plus',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'glm-4-plus',
        recommendAnthropic: false,
        layer: 'production',
      },
      {
        modelId: 'glm-4-air',
        displayName: 'GLM-4-Air',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'glm-4-air',
        recommendAnthropic: false,
        layer: 'production',
      },
      {
        modelId: 'glm-4-flash',
        displayName: 'GLM-4-Flash',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'glm-4-flash',
        recommendAnthropic: false,
        layer: 'production',
      },
    ],
  },

  // ============ æœˆä¹‹æš—é¢ (Moonshot) ============
  {
    providerId: 'moonshot',
    models: [
      {
        modelId: 'kimi-latest',
        displayName: 'Kimi Latest',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'kimi-latest',
        recommendAnthropic: true,
        recommendReason: 'æ›´å¥½çš„å·¥å…·è°ƒç”¨å’Œæµå¼è¾“å‡ºæ”¯æŒ',
        layer: 'research',
      },
      {
        modelId: 'moonshot-v1-8k',
        displayName: 'Moonshot V1 8K',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'moonshot-v1-8k',
        recommendAnthropic: false,
        layer: 'production',
      },
      {
        modelId: 'moonshot-v1-32k',
        displayName: 'Moonshot V1 32K',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'moonshot-v1-32k',
        recommendAnthropic: false,
        layer: 'production',
      },
      {
        modelId: 'moonshot-v1-128k',
        displayName: 'Moonshot V1 128K',
        supportedApiTypes: ['openai', 'anthropic'],
        anthropicModelId: 'moonshot-v1-128k',
        recommendAnthropic: false,
        layer: 'production',
      },
    ],
  },
];

/**
 * è·å– Provider æ”¯æŒå¤šåè®®çš„æ¨¡å‹åˆ—è¡¨
 */
export function getProviderMultiApiTypeModels(
  providerId: string,
): ModelApiTypeSupportConfig['models'] | null {
  const support = MODEL_API_TYPE_SUPPORT.find(
    (s) => s.providerId === providerId,
  );
  return support?.models ?? null;
}

/**
 * æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ”¯æŒå¤šç§åè®®
 */
export function isModelMultiApiTypeSupported(
  providerId: string,
  modelId: string,
): boolean {
  const models = getProviderMultiApiTypeModels(providerId);
  if (!models) return false;
  return models.some(
    (m) => m.modelId === modelId && m.supportedApiTypes.length > 1,
  );
}

/**
 * è·å–æ¨¡å‹æ”¯æŒçš„åè®®ç±»å‹
 */
export function getModelSupportedApiTypes(
  providerId: string,
  modelId: string,
): ModelApiType[] {
  const models = getProviderMultiApiTypeModels(providerId);
  if (!models) return ['openai'];
  const model = models.find((m) => m.modelId === modelId);
  return model?.supportedApiTypes ?? ['openai'];
}

/**
 * è·å–æ¨¡å‹çš„ Anthropic åè®®æ ‡è¯†ç¬¦
 */
export function getAnthropicModelId(
  providerId: string,
  modelId: string,
): string | null {
  const models = getProviderMultiApiTypeModels(providerId);
  if (!models) return null;
  const model = models.find((m) => m.modelId === modelId);
  return model?.anthropicModelId ?? null;
}

/**
 * æ£€æŸ¥æ˜¯å¦æ¨èä½¿ç”¨ Anthropic åè®®
 */
export function shouldRecommendAnthropic(
  providerId: string,
  modelId: string,
): { recommend: boolean; reason?: string } {
  const models = getProviderMultiApiTypeModels(providerId);
  if (!models) return { recommend: false };
  const model = models.find((m) => m.modelId === modelId);
  if (!model) return { recommend: false };
  return {
    recommend: model.recommendAnthropic ?? false,
    reason: model.recommendReason,
  };
}

/**
 * è·å–æ¨¡å‹æ‰€å±å±‚çº§
 */
export function getModelLayer(
  providerId: string,
  modelId: string,
): 'production' | 'research' | 'both' {
  const models = getProviderMultiApiTypeModels(providerId);
  if (!models) return 'production';
  const model = models.find((m) => m.modelId === modelId);
  return model?.layer ?? 'production';
}
```

### 3.3 Zero-Trust æ¨¡å¼ä¸‹çš„åè®®é€‚é…

#### 3.3.1 Hybrid-Native æ¨¡å¼æ‰©å±•

åœ¨ç°æœ‰ Zero-Trust æ¨¡å¼ä¸‹ï¼Œæ”¯æŒæŒ‰æ¨¡å‹é€‰æ‹©åè®®ï¼š

```typescript
// apps/api/src/modules/bot-api/services/openclaw-config.service.ts

export interface BotModelInfo {
  modelId: string;
  vendor: string;
  providerKeyId: string;
  // æ–°å¢ï¼šç”¨æˆ·ä¼˜å…ˆé€‰æ‹©çš„åè®®ç±»å‹
  preferredApiType?: ModelApiType;
  // æ–°å¢ï¼šæ¨¡å‹æ‰€å±å±‚çº§
  layer?: 'production' | 'research';
}

/**
 * æ„å»º Hybrid-Native Provider é…ç½®
 *
 * æ ¹æ®æ¨¡å‹å±‚çº§å’Œåè®®åå¥½é€‰æ‹© API ç±»å‹ï¼š
 * - ç¬¬ä¸€å±‚ï¼ˆproductionï¼‰ï¼šä½¿ç”¨ openai-completions
 * - ç¬¬äºŒå±‚ï¼ˆresearch + anthropicï¼‰ï¼šä½¿ç”¨ anthropic-messages
 */
private buildHybridNativeConfig(
  model: BotModelInfo,
  nativeConfig: OpenclawNativeProviderConfig,
  proxyUrl: string,
  proxyToken: string,
  gatewayToken: string,
): OpenclawConfigResult {
  // ç¬¬ä¸€å±‚ï¼šç”Ÿäº§å±‚ï¼Œå¼ºåˆ¶ä½¿ç”¨ OpenAI åè®®
  if (model.layer === 'production') {
    return this.buildOpenAICompatibleConfig(model, proxyUrl, proxyToken, gatewayToken);
  }

  // ç¬¬äºŒå±‚ï¼šç ”ç©¶å±‚ï¼Œæ ¹æ®ç”¨æˆ·åå¥½é€‰æ‹©åè®®
  const effectiveApiType = model.preferredApiType === 'anthropic'
    ? 'anthropic-messages'
    : nativeConfig.apiType;

  // ä½¿ç”¨ Anthropic åè®®
  if (effectiveApiType === 'anthropic-messages') {
    return this.buildAnthropicNativeConfig(model, proxyUrl, proxyToken, gatewayToken);
  }

  // ä½¿ç”¨åŸæœ‰é€»è¾‘
  return this.buildOriginalHybridNativeConfig(...);
}

/**
 * æ„å»º Anthropic Native é…ç½®
 */
private buildAnthropicNativeConfig(
  model: BotModelInfo,
  proxyUrl: string,
  proxyToken: string,
  gatewayToken: string,
): OpenclawConfigResult {
  const providerId = `proxy-anthropic-${model.vendor}`;

  // è·å– Anthropic æ¨¡å‹ ID
  const anthropicModelId = getAnthropicModelId(model.vendor, model.modelId)
    ?? model.modelId;

  const config: Record<string, unknown> = {
    models: {
      providers: {
        [providerId]: {
          baseUrl: `${proxyUrl}/v1/anthropic`,
          apiKey: proxyToken,
          api: 'anthropic-messages',
          models: [
            {
              id: anthropicModelId,
              name: anthropicModelId,
              input: ['text', 'image'],
              cost: { input: 0, output: 0, cacheRead: 0, cacheWrite: 0 },
              contextWindow: 200000,
              maxTokens: 8192,
            },
          ],
        },
      },
    },
    agents: {
      defaults: {
        model: {
          primary: `${providerId}/${anthropicModelId}`,
          fallbacks: [],
        },
      },
    },
    // ... å…¶ä»–é…ç½®
  };

  return {
    config,
    mode: 'hybrid-native',
    modelRef: `${providerId}/${anthropicModelId}`,
    fallbacks: [],
    openclawProviderId: providerId,
  };
}
```

### 3.4 Proxy Gateway åè®®è·¯ç”±

#### 3.4.1 åè®®è·¯ç”±ç«¯ç‚¹

```typescript
// apps/api/src/modules/proxy/proxy.controller.ts

@Controller('v1')
export class ProxyController {
  // ç¬¬ä¸€å±‚ï¼šOpenAI å…¼å®¹åè®®ç«¯ç‚¹
  @Post('openai-compatible/chat/completions')
  async handleOpenAICompatible(@Req() req: FastifyRequest) {
    return this.proxyService.handleOpenAICompatible(req);
  }

  // ç¬¬äºŒå±‚ï¼šAnthropic åè®®ç«¯ç‚¹
  @Post('anthropic/messages')
  async handleAnthropicMessages(@Req() req: FastifyRequest) {
    return this.proxyService.handleAnthropicMessages(req);
  }

  // æŒ‰åè®®ç±»å‹è·¯ç”±ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
  @Post(':protocol/:path')
  async handleProtocolRoute(
    @Param('protocol') protocol: string,
    @Param('path') path: string,
    @Req() req: FastifyRequest,
  ) {
    switch (protocol) {
      case 'openai':
      case 'openai-compatible':
        return this.proxyService.handleOpenAICompatible(req);
      case 'anthropic':
        return this.proxyService.handleAnthropicMessages(req);
      case 'gemini':
        return this.proxyService.handleGeminiNative(req);
      default:
        throw new BadRequestException(`Unsupported protocol: ${protocol}`);
    }
  }
}
```

#### 3.4.2 Anthropic åè®®å¤„ç†å™¨

```typescript
// apps/api/src/modules/proxy/handlers/anthropic-native.handler.ts

@Injectable()
export class AnthropicNativeHandler {
  /**
   * å¤„ç† Anthropic åŸç”Ÿè¯·æ±‚
   */
  async handle(
    request: AnthropicMessagesRequest,
    rawResponse: ServerResponse,
  ): Promise<ProxyResult> {
    // 1. éªŒè¯ Bot Tokenï¼ˆZero-Trustï¼‰
    const validation = await this.validateToken(request.botToken);

    // 2. æ ¹æ®æ¨¡å‹é€‰æ‹© Provider Key
    const providerKey = await this.selectProviderKey(
      validation.botId,
      'anthropic',
      request.model,
    );

    // 3. é€ä¼  Anthropic è¯·æ±‚ï¼ˆä¿ç•™ thinkingã€cache_control ç­‰å‚æ•°ï¼‰
    const response = await this.forwardToAnthropic(request, providerKey);

    // 4. æå– Token ä½¿ç”¨é‡ï¼ˆåŒ…æ‹¬ thinking_tokensã€cache_*_tokensï¼‰
    const usage = this.extractAnthropicUsage(response);

    // 5. è®°å½•ä½¿ç”¨æ—¥å¿—å’Œæˆæœ¬
    await this.logUsage(validation.botId, usage, 'anthropic-native');

    return response;
  }

  /**
   * æå– Anthropic å“åº”çš„ Token ä½¿ç”¨é‡
   */
  private extractAnthropicUsage(
    response: AnthropicResponse,
  ): ExtendedTokenUsage {
    return {
      inputTokens: response.usage.input_tokens,
      outputTokens: response.usage.output_tokens,
      // Extended Thinking tokens
      thinkingTokens: response.usage.thinking_tokens ?? 0,
      // Cache Control tokens
      cacheReadTokens: response.usage.cache_read_input_tokens ?? 0,
      cacheWriteTokens: response.usage.cache_creation_input_tokens ?? 0,
    };
  }
}
```

---

## å››ã€å‰ç«¯ UI è®¾è®¡

### 4.1 Secrets é¡µé¢æ¨¡å‹åè®®é€‰æ‹©å™¨

#### 4.1.1 æ¨¡å‹åˆ—è¡¨ä¸­çš„åè®®é€‰æ‹©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©è¦å¯ç”¨çš„æ¨¡å‹                          [å…¨é€‰] [å–æ¶ˆå…¨é€‰]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ glm-5                   [Anthropic â–¼] âš¡ ç¬¬äºŒå±‚æ¨è               â”‚
â”‚    æ™ºè°± AI                                                          â”‚
â”‚    â„¹ï¸ æ›´å¥½çš„ Extended Thinking å’Œæµå¼è¾“å‡ºæ”¯æŒ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ glm-4-plus              [OpenAI å…¼å®¹ â–¼]                          â”‚
â”‚    æ™ºè°± AI                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ kimi-latest             [Anthropic â–¼] âš¡ ç¬¬äºŒå±‚æ¨è               â”‚
â”‚    æœˆä¹‹æš—é¢                                                          â”‚
â”‚    â„¹ï¸ æ›´å¥½çš„å·¥å…·è°ƒç”¨å’Œæµå¼è¾“å‡ºæ”¯æŒ                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ deepseek-chat           [OpenAI å…¼å®¹]                            â”‚
â”‚    DeepSeek                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·²é€‰æ‹© 4 / 12 ä¸ªæ¨¡å‹
```

#### 4.1.2 åè®®é€‰æ‹©ä¸‹æ‹‰èœå•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‹ OpenAI å…¼å®¹           â”‚
â”‚ â— Anthropic       âš¡ æ¨èâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.3 æ¨¡å‹å±‚çº§æ ‡ç­¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜‘ claude-sonnet-4-20250514  [Anthropic]  ğŸ”¬ ç¬¬äºŒå±‚                 â”‚
â”‚    Anthropic                                                        â”‚
â”‚    ç”¨äºæ·±åº¦è§„åˆ’å’Œå¤æ‚æ¨ç†                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ gpt-4o                    [OpenAI å…¼å®¹]  ğŸ­ ç¬¬ä¸€å±‚                â”‚
â”‚    OpenAI                                                           â”‚
â”‚    ç”¨äºç”Ÿäº§å’Œè·¯ç”±                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ç»„ä»¶å®ç°

#### 4.2.1 åè®®é€‰æ‹©å™¨ç»„ä»¶

**æ–‡ä»¶è·¯å¾„**: `apps/web/app/[locale]/(main)/secrets/components/model-api-type-selector.tsx`

```tsx
'use client';

import {
  Badge,
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
  Tooltip,
} from '@repo/ui';
import { Sparkles, Info, FlaskConical, Factory } from 'lucide-react';
import {
  getModelSupportedApiTypes,
  shouldRecommendAnthropic,
  getModelLayer,
  type ModelApiType,
} from '@repo/contracts';

interface ModelApiTypeSelectorProps {
  providerId: string;
  modelId: string;
  value: ModelApiType | null;
  onChange: (apiType: ModelApiType) => void;
  disabled?: boolean;
}

const API_TYPE_LABELS: Record<ModelApiType, string> = {
  openai: 'OpenAI å…¼å®¹',
  anthropic: 'Anthropic',
  gemini: 'Google Gemini',
};

export function ModelApiTypeSelector({
  providerId,
  modelId,
  value,
  onChange,
  disabled,
}: ModelApiTypeSelectorProps) {
  const supportedTypes = getModelSupportedApiTypes(providerId, modelId);
  const { recommend, reason } = shouldRecommendAnthropic(providerId, modelId);
  const layer = getModelLayer(providerId, modelId);

  // åªæ”¯æŒå•ä¸€åè®®æ—¶ï¼Œä¸æ˜¾ç¤ºé€‰æ‹©å™¨
  if (supportedTypes.length <= 1) {
    return (
      <div className="flex items-center gap-2">
        <Badge variant="outline" className="text-xs">
          {API_TYPE_LABELS[supportedTypes[0] ?? 'openai']}
        </Badge>
        <LayerBadge layer={layer} />
      </div>
    );
  }

  return (
    <div className="flex items-center gap-2">
      <Select
        value={value ?? supportedTypes[0]}
        onValueChange={(v) => onChange(v as ModelApiType)}
        disabled={disabled}
      >
        <SelectTrigger className="h-7 w-32 text-xs">
          <SelectValue />
        </SelectTrigger>
        <SelectContent>
          {supportedTypes.map((type) => (
            <SelectItem key={type} value={type} className="text-xs">
              <div className="flex items-center gap-1.5">
                <span>{API_TYPE_LABELS[type]}</span>
                {type === 'anthropic' && recommend && (
                  <Sparkles className="size-3 text-amber-500" />
                )}
              </div>
            </SelectItem>
          ))}
        </SelectContent>
      </Select>

      <LayerBadge layer={layer} />

      {recommend && value === 'anthropic' && reason && (
        <Tooltip content={reason}>
          <Info className="size-3.5 text-muted-foreground cursor-help" />
        </Tooltip>
      )}
    </div>
  );
}

function LayerBadge({ layer }: { layer: 'production' | 'research' | 'both' }) {
  if (layer === 'production') {
    return (
      <Badge variant="secondary" className="text-xs gap-1">
        <Factory className="size-3" />
        ç¬¬ä¸€å±‚
      </Badge>
    );
  }
  if (layer === 'research') {
    return (
      <Badge className="text-xs gap-1 bg-purple-500 hover:bg-purple-600">
        <FlaskConical className="size-3" />
        ç¬¬äºŒå±‚
      </Badge>
    );
  }
  return null;
}
```

---

## äº”ã€OpenClaw é…ç½®ç”Ÿæˆ

### 5.1 é…ç½®æ¨¡æ¿

#### 5.1.1 ç¬¬ä¸€å±‚é…ç½®ï¼ˆç”Ÿäº§ + è·¯ç”±å±‚ï¼‰

```json
{
  "models": {
    "providers": {
      "openai-compatible": {
        "baseUrl": "${PROXY_URL}/v1/openai-compatible",
        "apiKey": "${PROXY_TOKEN}",
        "api": "openai-completions",
        "models": []
      }
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "openai-compatible/${MODEL_ID}",
        "fallbacks": [
          "openai-compatible/gpt-4o-mini",
          "openai-compatible/deepseek-chat"
        ]
      }
    }
  }
}
```

#### 5.1.2 ç¬¬äºŒå±‚é…ç½®ï¼ˆç ”ç©¶ Agent ä¸“ç”¨ï¼‰

```json
{
  "models": {
    "providers": {
      "anthropic-native": {
        "baseUrl": "${PROXY_URL}/v1/anthropic",
        "apiKey": "${PROXY_TOKEN}",
        "api": "anthropic-messages",
        "models": [
          {
            "id": "claude-sonnet-4-20250514",
            "name": "Claude Sonnet 4",
            "input": ["text", "image"],
            "contextWindow": 200000,
            "maxTokens": 8192,
            "cost": {
              "input": 3,
              "output": 15,
              "cacheRead": 0.3,
              "cacheWrite": 3.75
            }
          }
        ]
      }
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "anthropic-native/claude-sonnet-4-20250514",
        "fallbacks": ["anthropic-native/claude-opus-4-20250514"]
      },
      "thinking": {
        "enabled": true,
        "budget_tokens": 20000
      }
    }
  }
}
```

### 5.2 é…ç½®ç”Ÿæˆé€»è¾‘

```typescript
// apps/api/src/modules/bot-api/services/openclaw-config.service.ts

@Injectable()
export class OpenclawConfigService {
  /**
   * ç”ŸæˆåŒå±‚æ¨¡å‹é…ç½®
   */
  buildDualLayerConfig(
    primaryModel: BotModelInfo,
    options: OpenclawConfigOptions,
  ): OpenclawConfigResult {
    const layer = primaryModel.layer ?? 'production';

    // ç¬¬ä¸€å±‚ï¼šä½¿ç”¨ OpenAI å…¼å®¹åè®®
    if (layer === 'production') {
      return this.buildOpenAICompatibleConfig(primaryModel, options);
    }

    // ç¬¬äºŒå±‚ï¼šæ ¹æ®åè®®åå¥½é€‰æ‹©
    if (primaryModel.preferredApiType === 'anthropic') {
      return this.buildAnthropicNativeConfig(primaryModel, options);
    }

    // é»˜è®¤ä½¿ç”¨ OpenAI å…¼å®¹åè®®
    return this.buildOpenAICompatibleConfig(primaryModel, options);
  }

  /**
   * ç”Ÿæˆç¬¬ä¸€å±‚é…ç½®ï¼ˆOpenAI å…¼å®¹ï¼‰
   */
  private buildOpenAICompatibleConfig(
    model: BotModelInfo,
    options: OpenclawConfigOptions,
  ): OpenclawConfigResult {
    const providerId = 'proxy-openai-compatible';
    const modelRef = `${providerId}/${model.modelId}`;

    const config = {
      models: {
        providers: {
          [providerId]: {
            baseUrl: `${options.proxyUrl}/v1/openai-compatible`,
            apiKey: options.proxyToken,
            api: 'openai-completions',
            models: [],
          },
        },
      },
      agents: {
        defaults: {
          model: {
            primary: modelRef,
            fallbacks: [
              'proxy-openai-compatible/gpt-4o-mini',
              'proxy-openai-compatible/deepseek-chat',
            ],
          },
        },
      },
      // ... å…¶ä»–é…ç½®
    };

    return {
      config,
      mode: 'proxy',
      modelRef,
      fallbacks: [],
    };
  }

  /**
   * ç”Ÿæˆç¬¬äºŒå±‚é…ç½®ï¼ˆAnthropic åŸç”Ÿï¼‰
   */
  private buildAnthropicNativeConfig(
    model: BotModelInfo,
    options: OpenclawConfigOptions,
  ): OpenclawConfigResult {
    const providerId = `proxy-anthropic-${model.vendor}`;
    const anthropicModelId =
      getAnthropicModelId(model.vendor, model.modelId) ?? model.modelId;
    const modelRef = `${providerId}/${anthropicModelId}`;

    const config = {
      models: {
        providers: {
          [providerId]: {
            baseUrl: `${options.proxyUrl}/v1/anthropic`,
            apiKey: options.proxyToken,
            api: 'anthropic-messages',
            models: [
              {
                id: anthropicModelId,
                name: anthropicModelId,
                input: ['text', 'image'],
                contextWindow: 200000,
                maxTokens: 8192,
                cost: { input: 0, output: 0, cacheRead: 0, cacheWrite: 0 },
              },
            ],
          },
        },
      },
      agents: {
        defaults: {
          model: {
            primary: modelRef,
            fallbacks: this.getAnthropicFallbacks(model),
          },
          thinking: {
            enabled: true,
            budget_tokens: 20000,
          },
        },
      },
      // ... å…¶ä»–é…ç½®
    };

    return {
      config,
      mode: 'hybrid-native',
      modelRef,
      fallbacks: [],
      openclawProviderId: providerId,
    };
  }
}
```

---

## å…­ã€å®æ–½è®¡åˆ’

### 6.1 é˜¶æ®µåˆ’åˆ†

> **å®æ–½çŠ¶æ€æ›´æ–° (2026-02-22)**
>
> | çŠ¶æ€ | è¯´æ˜ |
> | ---- | ---- |
> | âœ… | å·²å®Œæˆ |
> | â³ | è¿›è¡Œä¸­ |
> | âŒ | æœªå¼€å§‹ |

| é˜¶æ®µ        | ç›®æ ‡              | äº¤ä»˜ç‰©                           | çŠ¶æ€ | å®é™…æ–‡ä»¶ |
| ----------- | ----------------- | -------------------------------- | ---- | -------- |
| **Phase 1** | æ•°æ®æ¨¡å‹æ‰©å±•      | Prisma schema æ›´æ–°ã€è¿ç§»è„šæœ¬     | âœ… | `apps/api/prisma/schema.prisma`, `apps/api/prisma/migrations/20260222074101_add_model_api_type_support/` |
| **Phase 2** | åè®®æ”¯æŒé…ç½®      | model-api-type-support.schema.ts | âœ… | `packages/contracts/src/schemas/model-api-type-support.schema.ts` |
| **Phase 3** | Proxy åè®®è·¯ç”±    | Anthropic åè®®å¤„ç†å™¨             | âœ… | `apps/api/src/modules/proxy/services/protocol-router.service.ts`, `apps/api/src/modules/proxy/proxy.controller.ts` |
| **Phase 4** | OpenClaw é…ç½®ç”Ÿæˆ | åŒå±‚é…ç½®é€»è¾‘                     | âœ… | `apps/api/src/modules/bot-api/services/openclaw-config.service.ts` |
| **Phase 5** | å‰ç«¯ UI           | åè®®é€‰æ‹©å™¨ç»„ä»¶                   | âœ… | `apps/web/app/[locale]/(main)/secrets/components/model-api-type-selector.tsx`, `apps/web/app/[locale]/(main)/secrets/components/provider-detail-panel.tsx` |
| **Phase 6** | æµ‹è¯•ä¸æ–‡æ¡£        | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ–‡æ¡£         | â³ | å¾…è¡¥å…… |

### 6.2 æ–‡ä»¶å˜æ›´æ¸…å•

#### 6.2.1 åç«¯æ–°å¢æ–‡ä»¶ âœ…

```
apps/api/src/modules/proxy/services/
â””â”€â”€ protocol-router.service.ts           # âœ… åè®®è·¯ç”±æœåŠ¡ï¼ˆå·²åˆ›å»ºï¼‰

packages/contracts/src/schemas/
â””â”€â”€ model-api-type-support.schema.ts     # âœ… æ¨¡å‹åè®®æ”¯æŒé…ç½®ï¼ˆå·²åˆ›å»ºï¼‰
```

> **æ³¨æ„**: åŸè®¡åˆ’ `anthropic-native.handler.ts` å·²åˆå¹¶åˆ° `protocol-router.service.ts` ä¸­å®ç°ã€‚

#### 6.2.2 åç«¯ä¿®æ”¹æ–‡ä»¶ âœ…

```
apps/api/prisma/schema.prisma            # âœ… æ•°æ®æ¨¡å‹æ‰©å±•ï¼ˆå·²æ·»åŠ  supportedApiTypes, preferredApiType, anthropicModelId, recommendAnthropic, modelLayer å­—æ®µï¼‰
apps/api/src/modules/bot-api/services/
â””â”€â”€ openclaw-config.service.ts           # âœ… åŒå±‚é…ç½®ç”Ÿæˆï¼ˆå·²æ·»åŠ  buildResearchLayerConfig, getResearchLayerFallbacksï¼‰

apps/api/src/modules/proxy/
â”œâ”€â”€ proxy.controller.ts                  # âœ… åè®®è·¯ç”±ç«¯ç‚¹ï¼ˆå·²æ·»åŠ  /v1/anthropic/* ç«¯ç‚¹ï¼‰
â”œâ”€â”€ proxy.module.ts                      # âœ… å·²æ³¨å†Œ ProtocolRouterService
â””â”€â”€ services/index.ts                    # âœ… å·²å¯¼å‡º ProtocolRouterService
```

#### 6.2.3 å‰ç«¯æ–°å¢æ–‡ä»¶ âœ…

```
apps/web/app/[locale]/(main)/secrets/components/
â””â”€â”€ model-api-type-selector.tsx          # âœ… åè®®é€‰æ‹©å™¨ç»„ä»¶ï¼ˆå·²åˆ›å»ºï¼‰
```

#### 6.2.4 å‰ç«¯ä¿®æ”¹æ–‡ä»¶ âœ…

```
apps/web/app/[locale]/(main)/secrets/components/
â”œâ”€â”€ provider-detail-panel.tsx            # âœ… é›†æˆåè®®é€‰æ‹©å™¨
â””â”€â”€ index.ts                             # âœ… å¯¼å‡º ModelApiTypeSelector

apps/web/locales/
â”œâ”€â”€ en/secrets.json                      # âœ… è‹±æ–‡ç¿»è¯‘ï¼ˆå·²æ·»åŠ  modelApiType, modelLayer, protocolSelectorï¼‰
â””â”€â”€ zh-CN/secrets.json                   # âœ… ä¸­æ–‡ç¿»è¯‘ï¼ˆå·²æ·»åŠ  modelApiType, modelLayer, protocolSelectorï¼‰
```

### 6.3 æ•°æ®åº“è¿ç§»

> **çŠ¶æ€**: âœ… è¿ç§»æ–‡ä»¶å·²åˆ›å»º
>
> è¿ç§»æ–‡ä»¶: `apps/api/prisma/migrations/20260222074101_add_model_api_type_support/`

```sql
-- æ·»åŠ  ModelAvailability è¡¨å­—æ®µ
ALTER TABLE "b_model_availability"
  ADD COLUMN "supported_api_types" TEXT[] DEFAULT ARRAY['openai']::TEXT[],
  ADD COLUMN "preferred_api_type" VARCHAR(50);

-- æ·»åŠ  ModelCatalog è¡¨å­—æ®µ
ALTER TABLE "b_model_catalog"
  ADD COLUMN "supported_api_types" TEXT[] DEFAULT ARRAY['openai']::TEXT[],
  ADD COLUMN "anthropic_model_id" VARCHAR(100),
  ADD COLUMN "recommend_anthropic" BOOLEAN DEFAULT FALSE,
  ADD COLUMN "recommend_reason" VARCHAR(500),
  ADD COLUMN "model_layer" VARCHAR(20) DEFAULT 'production';

-- åˆ›å»ºç´¢å¼•
CREATE INDEX "idx_model_availability_preferred_api_type"
  ON "b_model_availability"("preferred_api_type");
CREATE INDEX "idx_model_catalog_recommend_anthropic"
  ON "b_model_catalog"("recommend_anthropic");
CREATE INDEX "idx_model_catalog_model_layer"
  ON "b_model_catalog"("model_layer");
```

### 6.4 å¾…å®Œæˆäº‹é¡¹

| ä¼˜å…ˆçº§ | äº‹é¡¹ | çŠ¶æ€ |
| ------ | ---- | ---- |
| é«˜ | è¿è¡Œæ•°æ®åº“è¿ç§» (`pnpm db:migrate:deploy`) | â³ å¾…æ‰§è¡Œ |
| ä¸­ | æ·»åŠ åè®®è·¯ç”±çš„å•å…ƒæµ‹è¯• | âŒ æœªå¼€å§‹ |
| ä¸­ | æ·»åŠ å‰ç«¯ç»„ä»¶çš„æµ‹è¯• | âŒ æœªå¼€å§‹ |
| ä½ | æ·»åŠ æ›´å¤š Provider çš„ Anthropic åè®®æ”¯æŒï¼ˆå¦‚ DeepSeekã€Googleï¼‰ | âŒ æœªå¼€å§‹ |

### 6.5 æ¨¡å‹åè®®é…ç½®ç®¡ç† UI âœ… (2026-02-22 æ–°å¢)

> **åŠŸèƒ½è¯´æ˜**: åœ¨å‰ç«¯ Secrets é¡µé¢æ·»åŠ äº†åè®®é…ç½®ç®¡ç†å…¥å£ï¼Œå…è®¸ç®¡ç†å‘˜ç›´æ¥é…ç½®æ¯ä¸ª Provider ä¸‹æ¨¡å‹æ”¯æŒçš„åè®®ç±»å‹ã€‚

#### æ–°å¢æ–‡ä»¶

```
apps/web/app/[locale]/(main)/secrets/components/
â””â”€â”€ model-protocol-config-dialog.tsx    # âœ… åè®®é…ç½®å¯¹è¯æ¡†ç»„ä»¶
```

#### ä¿®æ”¹æ–‡ä»¶

```
packages/contracts/src/schemas/model.schema.ts      # âœ… æ·»åŠ åè®®é…ç½®ç›¸å…³ Schema
packages/contracts/src/api/model.contract.ts        # âœ… æ·»åŠ åè®®é…ç½® API ç«¯ç‚¹
apps/api/src/modules/bot-api/bot-api.controller.ts  # âœ… æ·»åŠ åè®®é…ç½®å¤„ç†å‡½æ•°
apps/api/src/modules/bot-api/services/available-model.service.ts  # âœ… æ·»åŠ åè®®é…ç½®æœåŠ¡æ–¹æ³•
apps/web/app/[locale]/(main)/secrets/components/provider-detail-panel.tsx  # âœ… é›†æˆåè®®é…ç½®æŒ‰é’®
apps/web/locales/zh-CN/secrets.json                 # âœ… ä¸­æ–‡ç¿»è¯‘
apps/web/locales/en/secrets.json                    # âœ… è‹±æ–‡ç¿»è¯‘
```

#### API ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
| ---- | ---- | ---- |
| GET | `/api/model/protocol-config/:providerKeyId` | è·å– Provider çš„æ¨¡å‹åè®®é…ç½® |
| PUT | `/api/model/protocol-config` | æ›´æ–°å•ä¸ªæ¨¡å‹åè®®é…ç½® |
| POST | `/api/model/protocol-config/batch` | æ‰¹é‡æ›´æ–°æ¨¡å‹åè®®é…ç½® |

#### UI åŠŸèƒ½

- åœ¨æ¨¡å‹é€‰æ‹©é¡µé¢æ·»åŠ ã€Œåè®®é…ç½®ã€æŒ‰é’®
- æ‰“å¼€å¯¹è¯æ¡†åå¯é…ç½®æ¯ä¸ªæ¨¡å‹çš„ï¼š
  - æ”¯æŒçš„åè®®ç±»å‹ï¼ˆOpenAI/Anthropic/Geminiï¼‰
  - é¦–é€‰åè®®
  - æ¨¡å‹å±‚çº§ï¼ˆç”Ÿäº§å±‚/ç ”ç©¶å±‚/é€šç”¨ï¼‰
- æ˜¾ç¤ºé¢„å®šä¹‰çš„æ¨èé…ç½®ï¼ˆæ¥è‡ª `MODEL_API_TYPE_SUPPORT`ï¼‰

---

## ä¸ƒã€é£é™©ä¸ç¼“è§£

### 7.1 æŠ€æœ¯é£é™©

| é£é™©                 | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½                              |
| -------------------- | ---- | ---- | ------------------------------------- |
| ç¬¬ä¸‰æ–¹ API åè®®å˜æ›´  | é«˜   | ä¸­   | å®šæœŸæ›´æ–°åè®®æ”¯æŒé…ç½®ï¼Œç›‘æ§ API å˜æ›´   |
| Anthropic åè®®ä¸å…¼å®¹ | ä¸­   | ä½   | å……åˆ†æµ‹è¯•å„ Provider çš„ Anthropic å®ç° |
| æ€§èƒ½ä¸‹é™             | ä¸­   | ä½   | æŒ‰å±‚åˆ†æµï¼Œé¿å…åè®®è½¬æ¢å¼€é”€            |
| æ•°æ®è¿ç§»å¤±è´¥         | é«˜   | ä½   | å¤‡ä»½æ•°æ®ï¼Œåˆ†æ‰¹è¿ç§»ï¼Œå›æ»šæœºåˆ¶          |

### 7.2 ä¸šåŠ¡é£é™©

| é£é™©             | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½                         |
| ---------------- | ---- | ---- | -------------------------------- |
| ç”¨æˆ·æ··æ·†ä¸¤å±‚æ¨¡å‹ | ä¸­   | ä¸­   | æ¸…æ™°çš„ UI æ ‡è¯†å’Œæ–‡æ¡£è¯´æ˜         |
| æˆæœ¬å¢åŠ          | ä¸­   | ä¸­   | ç¬¬äºŒå±‚æ¨¡å‹æŒ‰éœ€ä½¿ç”¨ï¼Œæˆæœ¬æ§åˆ¶ç­–ç•¥ |
| åŠŸèƒ½å›å½’         | ä½   | ä½   | ä¿æŒå‘åå…¼å®¹ï¼Œæ¸è¿›å¼è¿ç§»         |

---

## å…«ã€é™„å½•

### 8.1 æ”¯æŒå¤šåè®®çš„ Provider å‚è€ƒ

| Provider | Anthropic ç«¯ç‚¹           | æ–‡æ¡£                                                   |
| -------- | ------------------------ | ------------------------------------------------------ |
| æ™ºè°± AI  | `/api/paas/v4/anthropic` | https://open.bigmodel.cn/dev/api#anthropic             |
| æœˆä¹‹æš—é¢ | `/v1/anthropic`          | https://platform.moonshot.cn/docs/api/anthropic        |
| ç¡…åŸºæµåŠ¨ | `/v1/anthropic`          | https://docs.siliconflow.cn/cn/api-reference/anthropic |

### 8.2 ç›¸å…³æ–‡æ¡£

- [æ··åˆæ¶æ„å®æ–½è®¡åˆ’](./æ··åˆæ¶æ„å®æ–½è®¡åˆ’.md)
- [OpenClaw é…ç½®æ–‡ä»¶å®ä¾‹](./openclaw%20é…ç½®æ–‡ä»¶å®ä¾‹.md)
- [routing-optimization-plan.md](./routing-optimization-plan.md)
